dist: trusty
language: rust
cache: cargo
matrix:
  include:
    - env: TARGET=armv5te-unknown-linux-musleabi CARGO_TARGET_ARMV5TE_UNKNOWN_LINUX_MUSLEABI_LINKER=arm-linux-musleabihf-gcc CC_armv5te_unknown_linux_musleabi=arm-linux-musleabihf-gcc CXX_armv5te_unknown_linux_musleabi=arm-linux-musleabihf-g++
    - env: TARGET=x86_64-unknown-linux-musl
      addons:
        apt:
          packages:
            - musl-tools
    - env: TARGET=x86_64-apple-darwin
      os: osx

script:
  - sh ci/build.sh

deploy:
  api_key:
    secure: "p9JvbtkiqTWzpINHyvAQi6cllq3bfuday2BSgN5J+dJ5XAOhwkSA0DDg0eTaOWFyF6QrIpaPq3AGRG2GAv5niIozGK8P5KkEVMEsBZEAzUjTA1i26lL3zFi5fKImf4Ez3yXUZYefm14yshkZ57TpT/NdP8bbhueRj/QxO1Bo5Ah+cbvdfI4tef9hLc9VnyGBWjHaL042xBUaGmE3Xtq1g2r97QrJeWkaK0XlJYR1/QAzVDw3IXpT2/Y1mrkiw36eanvPRtG1vaf2+Kz08q/gBYnLTwnEu+sFinLtdlXPVOO6I44+qtwlHqcw5RPyxcZctK8gAudO07CYT7IuLpOY+wPC9aLVMNdb9dtJZZMFcj/5f5YEi+zgzcROeTq5rvY+sTZTZgywBpMVHnEE0nCnXuFkvqsFgPEA/W9lKzNYYAfwn7rnwOsqsexZ+83uEF2jmIHhNccp2eBPBdkCVol/y9voc81BmNxD/kXS8a+/iGu69TZ52fhTJMYtV+dLNRurYI+/O7jMeS7pibp2/o9JlFSIU50rnW2LFzvKPLugAWXiJZr3n+SspB9405VXdNchnL4P5gJDN3v3ta+Gl/2rQi1TZXkseWKywjm5/cXK7b5GT0fcbdhZN/B1KWSv9PVxhNEzTQCb8tBR/euOx5l830UROJDDugs9CwnLO4tCC5k="
  file: rsnova-$TRAVIS_TAG-$TARGET.tar.gz
  on:
    tags: true
  provider: releases
  skip_cleanup: true
  overwrite: true